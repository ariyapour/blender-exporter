{"type": "Program", "body": [{"rest": null, "type": "FunctionDeclaration", "expression": false, "id": {"type": "Identifier", "name": "shade"}, "body": {"type": "BlockStatement", "body": [{"type": "VariableDeclaration", "declarations": [{"id": {"type": "Identifier", "name": "DiffuseBSDFColor"}, "type": "VariableDeclarator", "init": {"type": "CallExpression", "arguments": [{"object": {"type": "Identifier", "name": "env"}, "property": {"type": "Identifier", "name": "colorRamp1"}, "type": "MemberExpression", "computed": false}, {"object": {"type": "Identifier", "name": "env"}, "property": {"type": "Identifier", "name": "position1"}, "type": "MemberExpression", "computed": false}, {"object": {"type": "Identifier", "name": "env"}, "property": {"type": "Identifier", "name": "colorRamp2"}, "type": "MemberExpression", "computed": false}, {"object": {"type": "Identifier", "name": "env"}, "property": {"type": "Identifier", "name": "position2"}, "type": "MemberExpression", "computed": false}, {"object": {"type": "Identifier", "name": "env"}, "property": {"type": "Identifier", "name": "colorRamp3"}, "type": "MemberExpression", "computed": false}, {"object": {"type": "Identifier", "name": "env"}, "property": {"type": "Identifier", "name": "position3"}, "type": "MemberExpression", "computed": false}, {"object": {"type": "Identifier", "name": "env"}, "property": {"type": "Identifier", "name": "colorRamp4"}, "type": "MemberExpression", "computed": false}, {"object": {"type": "Identifier", "name": "env"}, "property": {"type": "Identifier", "name": "position4"}, "type": "MemberExpression", "computed": false}, {"type": "CallExpression", "arguments": [], "callee": {"object": {"type": "Identifier", "name": "ColorRampFac"}, "property": {"type": "Identifier", "name": "length"}, "type": "MemberExpression", "computed": false}}], "callee": {"type": "Identifier", "name": "colorRamp_linearInterpolation"}}}], "kind": "var"}, {"type": "VariableDeclaration", "declarations": [{"id": {"type": "Identifier", "name": "fresnel"}, "type": "VariableDeclarator", "init": {"type": "CallExpression", "arguments": [{"object": {"type": "Identifier", "name": "env"}, "property": {"type": "Identifier", "name": "blend"}, "type": "MemberExpression", "computed": false}, {"object": {"type": "Identifier", "name": "env"}, "property": {"type": "Identifier", "name": "normal"}, "type": "MemberExpression", "computed": false}, {"object": {"type": "Identifier", "name": "env"}, "property": {"type": "Identifier", "name": "position"}, "type": "MemberExpression", "computed": false}], "callee": {"type": "Identifier", "name": "fresnelequation"}}}], "kind": "var"}, {"type": "VariableDeclaration", "declarations": [{"id": {"type": "Identifier", "name": "eta"}, "type": "VariableDeclarator", "init": {"type": "CallExpression", "arguments": [{"object": {"type": "Identifier", "name": "env"}, "property": {"type": "Identifier", "name": "blend"}, "type": "MemberExpression", "computed": false}], "callee": {"type": "Identifier", "name": "calculateEta"}}}], "kind": "var"}, {"argument": {"type": "CallExpression", "arguments": [{"object": {"type": "Identifier", "name": "env"}, "property": {"type": "Identifier", "name": "normal"}, "type": "MemberExpression", "computed": false}, {"object": {"type": "Identifier", "name": "env"}, "property": {"type": "Identifier", "name": "GlossyBSDFColor"}, "type": "MemberExpression", "computed": false}, {"type": "Identifier", "name": "fresnel"}], "callee": {"object": {"type": "CallExpression", "arguments": [{"type": "Identifier", "name": "DiffuseBSDFColor"}, {"object": {"type": "Identifier", "name": "env"}, "property": {"type": "Identifier", "name": "normal"}, "type": "MemberExpression", "computed": false}], "callee": {"object": {"type": "NewExpression", "arguments": [], "callee": {"type": "Identifier", "name": "Shade"}}, "property": {"type": "Identifier", "name": "diffuse"}, "type": "MemberExpression", "computed": false}}, "property": {"type": "Identifier", "name": "reflect"}, "type": "MemberExpression", "computed": false}}, "type": "ReturnStatement"}]}, "generator": false, "defaults": [], "params": [{"type": "Identifier", "name": "env"}]}, {"rest": null, "type": "FunctionDeclaration", "expression": false, "id": {"type": "Identifier", "name": "calculateEta"}, "body": {"type": "BlockStatement", "body": [{"argument": {"type": "CallExpression", "arguments": [{"right": {"type": "Identifier", "name": "blend"}, "type": "BinaryExpression", "left": {"value": 1.0, "raw": "1.0", "type": "Literal"}, "operator": "-"}, {"value": 1e-05, "raw": "1e-5", "type": "Literal"}], "callee": {"object": {"type": "Identifier", "name": "Math"}, "property": {"type": "Identifier", "name": "max"}, "type": "MemberExpression", "computed": false}}, "type": "ReturnStatement"}]}, "generator": false, "defaults": [], "params": [{"type": "Identifier", "name": "blend"}]}, {"rest": null, "type": "FunctionDeclaration", "expression": false, "id": {"type": "Identifier", "name": "fresnelequation"}, "body": {"type": "BlockStatement", "body": [{"type": "VariableDeclaration", "declarations": [{"id": {"type": "Identifier", "name": "N"}, "type": "VariableDeclarator", "init": {"type": "CallExpression", "arguments": [], "callee": {"object": {"type": "Identifier", "name": "normal"}, "property": {"type": "Identifier", "name": "normalize"}, "type": "MemberExpression", "computed": false}}}], "kind": "var"}, {"type": "VariableDeclaration", "declarations": [{"id": {"type": "Identifier", "name": "I"}, "type": "VariableDeclarator", "init": {"type": "CallExpression", "arguments": [{"object": {"type": "ThisExpression"}, "property": {"type": "Identifier", "name": "cameraPosition"}, "type": "MemberExpression", "computed": false}], "callee": {"object": {"type": "CallExpression", "arguments": [{"object": {"type": "Identifier", "name": "Space"}, "property": {"type": "Identifier", "name": "WORLD"}, "type": "MemberExpression", "computed": false}, {"type": "Identifier", "name": "position"}], "callee": {"object": {"type": "Identifier", "name": "Space"}, "property": {"type": "Identifier", "name": "transformDirection"}, "type": "MemberExpression", "computed": false}}, "property": {"type": "Identifier", "name": "sub"}, "type": "MemberExpression", "computed": false}}}], "kind": "var"}, {"type": "VariableDeclaration", "declarations": [{"id": {"type": "Identifier", "name": "cosi"}, "type": "VariableDeclarator", "init": {"type": "CallExpression", "arguments": [{"type": "Identifier", "name": "N"}], "callee": {"object": {"type": "Identifier", "name": "I"}, "property": {"type": "Identifier", "name": "dot"}, "type": "MemberExpression", "computed": false}}}], "kind": "var"}, {"type": "VariableDeclaration", "declarations": [{"id": {"type": "Identifier", "name": "eta"}, "type": "VariableDeclarator", "init": {"type": "CallExpression", "arguments": [{"right": {"type": "Identifier", "name": "blend"}, "type": "BinaryExpression", "left": {"value": 1.0, "raw": "1.0", "type": "Literal"}, "operator": "-"}, {"value": 1e-05, "raw": "1e-5", "type": "Literal"}], "callee": {"object": {"type": "Identifier", "name": "Math"}, "property": {"type": "Identifier", "name": "max"}, "type": "MemberExpression", "computed": false}}}], "kind": "var"}, {"type": "VariableDeclaration", "declarations": [{"id": {"type": "Identifier", "name": "c"}, "type": "VariableDeclarator", "init": {"type": "CallExpression", "arguments": [{"type": "Identifier", "name": "cosi"}], "callee": {"object": {"type": "Identifier", "name": "Math"}, "property": {"type": "Identifier", "name": "abs"}, "type": "MemberExpression", "computed": false}}}], "kind": "var"}, {"type": "VariableDeclaration", "declarations": [{"id": {"type": "Identifier", "name": "g"}, "type": "VariableDeclarator", "init": {"right": {"right": {"type": "Identifier", "name": "c"}, "type": "BinaryExpression", "left": {"type": "Identifier", "name": "c"}, "operator": "*"}, "type": "BinaryExpression", "left": {"right": {"value": 1.0, "raw": "1.0", "type": "Literal"}, "type": "BinaryExpression", "left": {"right": {"type": "Identifier", "name": "eta"}, "type": "BinaryExpression", "left": {"type": "Identifier", "name": "eta"}, "operator": "*"}, "operator": "-"}, "operator": "+"}}], "kind": "var"}, {"test": {"right": {"value": 0, "raw": "0", "type": "Literal"}, "type": "BinaryExpression", "left": {"type": "Identifier", "name": "g"}, "operator": ">"}, "type": "IfStatement", "consequent": {"type": "BlockStatement", "body": [{"expression": {"right": {"type": "CallExpression", "arguments": [{"type": "Identifier", "name": "g"}], "callee": {"object": {"type": "Identifier", "name": "Math"}, "property": {"type": "Identifier", "name": "sqrt"}, "type": "MemberExpression", "computed": false}}, "type": "AssignmentExpression", "left": {"type": "Identifier", "name": "g"}, "operator": "="}, "type": "ExpressionStatement"}, {"type": "VariableDeclaration", "declarations": [{"id": {"type": "Identifier", "name": "A"}, "type": "VariableDeclarator", "init": {"right": {"right": {"type": "Identifier", "name": "c"}, "type": "BinaryExpression", "left": {"type": "Identifier", "name": "g"}, "operator": "+"}, "type": "BinaryExpression", "left": {"right": {"type": "Identifier", "name": "c"}, "type": "BinaryExpression", "left": {"type": "Identifier", "name": "g"}, "operator": "-"}, "operator": "/"}}], "kind": "var"}, {"type": "VariableDeclaration", "declarations": [{"id": {"type": "Identifier", "name": "B"}, "type": "VariableDeclarator", "init": {"right": {"right": {"value": 1.0, "raw": "1.0", "type": "Literal"}, "type": "BinaryExpression", "left": {"right": {"right": {"type": "Identifier", "name": "c"}, "type": "BinaryExpression", "left": {"type": "Identifier", "name": "g"}, "operator": "-"}, "type": "BinaryExpression", "left": {"type": "Identifier", "name": "c"}, "operator": "*"}, "operator": "+"}, "type": "BinaryExpression", "left": {"right": {"value": 1.0, "raw": "1.0", "type": "Literal"}, "type": "BinaryExpression", "left": {"right": {"right": {"type": "Identifier", "name": "c"}, "type": "BinaryExpression", "left": {"type": "Identifier", "name": "g"}, "operator": "+"}, "type": "BinaryExpression", "left": {"type": "Identifier", "name": "c"}, "operator": "*"}, "operator": "-"}, "operator": "/"}}], "kind": "var"}, {"argument": {"right": {"right": {"right": {"type": "Identifier", "name": "B"}, "type": "BinaryExpression", "left": {"type": "Identifier", "name": "B"}, "operator": "*"}, "type": "BinaryExpression", "left": {"value": 1.0, "raw": "1.0", "type": "Literal"}, "operator": "+"}, "type": "BinaryExpression", "left": {"right": {"type": "Identifier", "name": "A"}, "type": "BinaryExpression", "left": {"right": {"type": "Identifier", "name": "A"}, "type": "BinaryExpression", "left": {"value": 0.5, "raw": "0.5", "type": "Literal"}, "operator": "*"}, "operator": "*"}, "operator": "*"}, "type": "ReturnStatement"}]}, "alternate": {"argument": {"value": 1.0, "raw": "1.0", "type": "Literal"}, "type": "ReturnStatement"}}]}, "generator": false, "defaults": [], "params": [{"type": "Identifier", "name": "blend"}, {"type": "Identifier", "name": "normal"}, {"type": "Identifier", "name": "position"}]}, {"type": "Program", "body": [{"rest": null, "type": "FunctionDeclaration", "expression": false, "id": {"type": "Identifier", "name": "colorRamp_linearInterpolation"}, "body": {"type": "BlockStatement", "body": [{"type": "VariableDeclaration", "declarations": [{"id": {"type": "Identifier", "name": "result"}, "type": "VariableDeclarator", "init": {"type": "NewExpression", "arguments": [], "callee": {"type": "Identifier", "name": "Vec3"}}}], "kind": "var"}, {"test": {"right": {"type": "Identifier", "name": "p4"}, "type": "BinaryExpression", "left": {"type": "Identifier", "name": "t"}, "operator": ">"}, "type": "IfStatement", "consequent": {"expression": {"right": {"type": "Identifier", "name": "c4"}, "type": "AssignmentExpression", "left": {"type": "Identifier", "name": "result"}, "operator": "="}, "type": "ExpressionStatement"}, "alternate": {"test": {"right": {"type": "Identifier", "name": "p3"}, "type": "BinaryExpression", "left": {"type": "Identifier", "name": "t"}, "operator": ">"}, "type": "IfStatement", "consequent": {"expression": {"right": {"type": "CallExpression", "arguments": [{"type": "Identifier", "name": "p3"}, {"type": "Identifier", "name": "p4"}, {"type": "Identifier", "name": "c3"}, {"type": "Identifier", "name": "c4"}, {"type": "Identifier", "name": "t"}], "callee": {"type": "Identifier", "name": "linearColorInterpolation"}}, "type": "AssignmentExpression", "left": {"type": "Identifier", "name": "result"}, "operator": "="}, "type": "ExpressionStatement"}, "alternate": {"test": {"right": {"type": "Identifier", "name": "p2"}, "type": "BinaryExpression", "left": {"type": "Identifier", "name": "t"}, "operator": ">"}, "type": "IfStatement", "consequent": {"expression": {"right": {"type": "CallExpression", "arguments": [{"type": "Identifier", "name": "p2"}, {"type": "Identifier", "name": "p3"}, {"type": "Identifier", "name": "c2"}, {"type": "Identifier", "name": "c3"}, {"type": "Identifier", "name": "t"}], "callee": {"type": "Identifier", "name": "linearColorInterpolation"}}, "type": "AssignmentExpression", "left": {"type": "Identifier", "name": "result"}, "operator": "="}, "type": "ExpressionStatement"}, "alternate": {"expression": {"right": {"type": "CallExpression", "arguments": [{"type": "Identifier", "name": "p1"}, {"type": "Identifier", "name": "p2"}, {"type": "Identifier", "name": "c1"}, {"type": "Identifier", "name": "c2"}, {"type": "Identifier", "name": "t"}], "callee": {"type": "Identifier", "name": "linearColorInterpolation"}}, "type": "AssignmentExpression", "left": {"type": "Identifier", "name": "result"}, "operator": "="}, "type": "ExpressionStatement"}}}}, {"argument": {"type": "Identifier", "name": "result"}, "type": "ReturnStatement"}]}, "generator": false, "defaults": [], "params": [{"type": "Identifier", "name": "c1"}, {"type": "Identifier", "name": "p1"}, {"type": "Identifier", "name": "c2"}, {"type": "Identifier", "name": "p2"}, {"type": "Identifier", "name": "c3"}, {"type": "Identifier", "name": "p3"}, {"type": "Identifier", "name": "c4"}, {"type": "Identifier", "name": "p4"}, {"type": "Identifier", "name": "t"}]}, {"rest": null, "type": "FunctionDeclaration", "expression": false, "id": {"type": "Identifier", "name": "linearColorInterpolation"}, "body": {"type": "BlockStatement", "body": [{"argument": {"type": "CallExpression", "arguments": [{"type": "CallExpression", "arguments": [{"right": {"type": "Identifier", "name": "x"}, "type": "BinaryExpression", "left": {"type": "Identifier", "name": "t"}, "operator": "-"}], "callee": {"object": {"type": "CallExpression", "arguments": [{"right": {"type": "Identifier", "name": "x"}, "type": "BinaryExpression", "left": {"type": "Identifier", "name": "y"}, "operator": "-"}], "callee": {"object": {"type": "CallExpression", "arguments": [{"type": "Identifier", "name": "fX"}], "callee": {"object": {"type": "Identifier", "name": "fY"}, "property": {"type": "Identifier", "name": "sub"}, "type": "MemberExpression", "computed": false}}, "property": {"type": "Identifier", "name": "div"}, "type": "MemberExpression", "computed": false}}, "property": {"type": "Identifier", "name": "mul"}, "type": "MemberExpression", "computed": false}}], "callee": {"object": {"type": "Identifier", "name": "fX"}, "property": {"type": "Identifier", "name": "add"}, "type": "MemberExpression", "computed": false}}, "type": "ReturnStatement"}]}, "generator": false, "defaults": [], "params": [{"type": "Identifier", "name": "x"}, {"type": "Identifier", "name": "y"}, {"type": "Identifier", "name": "fX"}, {"type": "Identifier", "name": "fY"}, {"type": "Identifier", "name": "t"}]}]}]}